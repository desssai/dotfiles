#! vi: ft=hyprlang 

monitor=Unknown-1,disabled
# monitor=DP-1,disabled
monitor=DP-1,5120x1440@240,0x0,1,bitdepth,10
# monitor=DP-3,2560x1440@180.0,3440x0,1
monitor=HDMI-A-1,3440x1440@100,0x0,1
monitor=eDP-1,1920x1080@100,3440x0,1

workspace=01,monitor:DP-1
workspace=02,monitor:DP-1
workspace=03,monitor:DP-1
workspace=04,monitor:DP-1
workspace=05,monitor:DP-1
workspace=06,monitor:DP-1
workspace=07,monitor:DP-1
workspace=08,monitor:DP-1
workspace=09,monitor:DP-1


# windowrulev2 = suppressevent maximize, class:.* # You'll probably like this.
windowrulev2 = pseudo,size 3440 1440,class:^zen$
windowrulev2 = size 3440 1440,class:^kitty$
windowrulev2 = float,title:^btop$
windowrulev2 = float,class:steam
windowrulev2 = float,initialClass:^steam_app_*$
windowrulev2 = fullscreen,initialClass:^steam_app_*$
windowrulev2 = float,initialClass:^org.gnome.Nautilus$

# workspace = 8, rounding:false, decorate:false, gapsin:0, gapsout:0, border:false // TODO: make gamemode

layerrule=ignorezero, hello
layerrule=ignorezero, ags-widget
layerrule=blur, hello
layerrule=blur, ags-widget

exec-once = gsettings set org.gnome.desktop.interface gtk-theme 'WhiteSur-Dark-solid'
exec-once = gsettings set org.gnome.desktop.interface font-name 'SF Pro Display'
exec-once = gsettings set org.gnome.desktop.interface icon-theme 'WhiteSur'
exec-once = gsettings set org.gnome.desktop.interface cursor-theme 'WhiteSur-cursors'

exec-once = ~/.config/hypr/scipts/startup.sh
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = hyprctl setcursor 'WhiteSur-cursors' 16
exec-once = vicinae server
exec-once = hypridle
exec-once = hyprsunset

source = ~/.config/hypr/appereance.conf
source = ~/.config/hypr/environment.conf

$terminal = kitty
$files = nautilus

input {
  kb_layout = us,ru
  kb_options = caps:ctrl_modifier
  repeat_rate = 35
  repeat_delay = 300
  sensitivity = 0
  accel_profile = flat
  scroll_method = 2fg
  natural_scroll = false
  follow_mouse = 2

  touchpad {
    natural_scroll = true
    clickfinger_behavior = true
    scroll_factor = 0.3
    tap-to-click = true
  }
}

# Workaround for the zen browser that is yet to allow tab cycling
binde = ALT, u, exec, hyprctl dispatch sendshortcut "ALT, u, activewindow"
binde = ALT, w, exec, hyprctl dispatch sendshortcut "ALT, w, activewindow"
binde = ALT, n, exec, hyprctl dispatch sendshortcut "ALT, n, activewindow"
binde = ALT, h, exec, hyprctl dispatch sendshortcut "ALT, h, activewindow"
binde = ALT, j, exec, hyprctl activewindow | grep -q "class: zen" && hyprctl dispatch sendshortcut "CTRL, page_down, activewindow" || hyprctl dispatch sendshortcut "ALT, j, activewindow"
binde = ALT, k, exec, hyprctl activewindow | grep -q "class: zen" && hyprctl dispatch sendshortcut "CTRL, page_up, activewindow" || hyprctl dispatch sendshortcut "ALT, k, activewindow"
binde = ALT, l, exec, hyprctl dispatch sendshortcut "ALT, l, activewindow"

# Workaround for obsidian
binde = CTRL, j, exec, hyprctl activewindow | grep -q "class: obsidian" && hyprctl dispatch sendshortcut ", down, activewindow" || hyprctl dispatch sendshortcut "CTRL, j, activewindow"
binde = CTRL, k, exec, hyprctl activewindow | grep -q "class: obsidian" && hyprctl dispatch sendshortcut ", up, activewindow" || hyprctl dispatch sendshortcut "CTRL, k, activewindow"

animations {
  enabled = yes
  animation = windows, 0
  animation = windowsMove, 1, 3, default
  animation = border, 1, 10, default
  animation = borderangle, 1, 8, default
  animation = fade, 1, 7, default
  animation = fadeIn, 0
  animation = fadeOut, 0
  animation = workspaces, 1, 8, default, fade
}

general {
  layout = dwindle
}

dwindle {
  pseudotile = yes
  preserve_split = yes
  smart_split = false
}

master {
  orientation = center
  new_status = slave
  slave_count_for_center_master = 0
  always_keep_position = true
  mfact = 0.65
}

gestures {
  # workspace_swipe = true # outdated
  # workspace_swipe_fingers = 3 # outdated
  workspace_swipe_min_speed_to_force = 0
  workspace_swipe_distance = 0
  workspace_swipe_cancel_ratio = 0.01
  workspace_swipe_invert = true
  workspace_swipe_create_new = true
}

misc {
  force_default_wallpaper = 0
  disable_autoreload = true
}

# debug {
  # disable_logs = false
  # disable_time = false
# }

bind = SUPER, Return, exec, $terminal
bind = SUPER, W, killactive, 
bind = SUPER + SHIFT, Q, exit, 
bind = SUPER, E, exec, pkill -SIGUSR1 $files || $files
bind = SUPER, T, exec, pkill btop || kitty -T btop btop
bind = SUPER, Space, exec, vicinae toggle

# Screenshots
bind = SUPER + SHIFT, 3, exec, grim "$HOME/Documents/Screenshots/$(date +%F-%Hh%Mm%Ss)".png
bind = SUPER + CTRL + SHIFT, 3, exec, grim - | wl-copy
bind = SUPER + SHIFT, 4, exec, grim -g "$(slurp)" "$HOME/Documents/Screenshots/$(date +%F-%Hh%Mm%Ss)".png
bind = SUPER + CTRL + SHIFT, 4, exec, grim -g "$(slurp)" - | wl-copy

# Media keys
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle

bind = CTRL, Space, exec, hyprctl switchxkblayout current next

# SWITCH FOCUS TO A WINDOW
bind = SUPER, h, movefocus, l
bind = SUPER, l, movefocus, r
bind = SUPER, k, movefocus, u
bind = SUPER, j, movefocus, d

# SWITCH FOCUS TO PREV | NEXT MONITOR
bind = SUPER, s, focusmonitor, +1
bind = SUPER, g, focusmonitor, -1

# SWAP WINDOWS
bind = SUPER + SHIFT, h, swapwindow, l
bind = SUPER + SHIFT, l, swapwindow, r
bind = SUPER + SHIFT, k, swapwindow, u
bind = SUPER + SHIFT, j, swapwindow, d

# SWITCH FOCUS TO A WORKSPACE
bind = CTRL, 1, workspace, 1
bind = CTRL, 2, workspace, 2
bind = CTRL, 3, workspace, 3
bind = CTRL, 4, workspace, 4
bind = CTRL, 5, workspace, 5
bind = CTRL, 6, workspace, 6
bind = CTRL, 7, workspace, 7
bind = CTRL, 8, workspace, 8
bind = CTRL, 9, workspace, 9

# SWITCH FOCUS TO PREV | NEXT WORKSPACE
bind = CTRL, h, workspace, e-1
bind = CTRL, l, workspace, e+1

# MOVE ACTIVE WINDOW TO A WORKSPACE
bind = CTRL + SUPER, 1, movetoworkspacesilent, 1
bind = CTRL + SUPER, 2, movetoworkspacesilent, 2
bind = CTRL + SUPER, 3, movetoworkspacesilent, 3
bind = CTRL + SUPER, 4, movetoworkspacesilent, 4
bind = CTRL + SUPER, 5, movetoworkspacesilent, 5
bind = CTRL + SUPER, 6, movetoworkspacesilent, 6
bind = CTRL + SUPER, 7, movetoworkspacesilent, 7
bind = CTRL + SUPER, 8, movetoworkspacesilent, 8
bind = CTRL + SUPER, 9, movetoworkspacesilent, 9

# MOVE ACTIVE WINDOW TO A WORKSPACE
bind = CTRL + SUPER, h, movetoworkspacesilent, -1
bind = CTRL + SUPER, l, movetoworkspacesilent, +1

# MOVE ACTIVE WINDOW TO ANOTHER MONITOR
bind = CTRL + SUPER, g, movewindow, mon:+1
bind = CTRL + SUPER, s, movewindow, mon:-1

# EXAMPLE SPECIAL WORKSPACE (SCRATCHPAD)
bind = SUPER, =, togglespecialworkspace, magic
bind = SUPER, m, movetoworkspace, special:magic

# TOGGLE COLOR PICKER
bind = CTRL + SUPER, i, exec, hyprpicker -a

# TOGGLE FLOATING FOR A FOCUSED WINDOW
bind = CTRL + SUPER, f, togglefloating, 

# TOGGLE MAXIMIZE FOR A FOCUSED WINDOW
bind = CTRL + SUPER, m, fullscreen, 1 
bind = CTRL + SUPER + SHIFT, m, fullscreen, 0

# LAYOUT SPECIFIC BINDINGS
bind = CTRL + SUPER, P, pseudo, # dwindle
bind = CTRL + SUPER, J, togglesplit, # dwindle

# MOVE/RESIZE WINDOWS WITH CTRL + SUPER + LMB/RMB AND DRAGGING
bindm = CTRL + SUPER, mouse:272, movewindow
bindm = CTRL + SUPER, mouse:273, resizewindow

# MOVE/RESIZE WINDOWS WITH CTRL + SUPER + ARROW KEYS
binde = CTRL + SUPER, right,resizeactive,10 0
binde = CTRL + SUPER, left,resizeactive,-10 0
binde = CTRL + SUPER, up,resizeactive,0 -10
binde = CTRL + SUPER, down,resizeactive,0 10

bind = CTRL + SUPER, q, exec, hyprlock
# bind = CTRL + SUPER, x, exec, ags quit
bind = CTRL + SUPER, x, exit,
bind = CTRL + SUPER, z, exec, hyprctl reload && ~/.config/hypr/scipts/startup.sh
# bind = CTRL + SUPER, w, exec, ags quit; ags run --gtk 4 -d /home/ncarob/.config/agsnew/
